input {
#	file {
#		path => [
#			"C:/MRSLogs/OCM-01A/Wabtec$/OCM/Diagnostics/*/BOS*.*.log",
#			"C:/MRSLogs/OCM-01B/Wabtec$/OCM/Diagnostics/*/BOS*.*.log"
#		]
#		type => "ocm"
#		start_position => "beginning"
#		
#	}
#	
#	file {
#		path => [
#			"C:/MRSLogs/OCM-02A/Wabtec$/OCM/Diagnostics/*/BOS*.*.log",
#			"C:/MRSLogs/OCM-02B/Wabtec$/OCM/Diagnostics/*/BOS*.*.log"
#		]
#		type => "ocm"
#		start_position => "beginning"
#	}
#	file {
#		path => [
#			"C:/MRSLogs/OCM-03A/Wabtec$/OCM/Diagnostics/*/BOS*.*.log",
#			"C:/MRSLogs/OCM-03B/Wabtec$/OCM/Diagnostics/*/BOS*.*.log"
#		]
#		type => "ocm"
#		start_position => "beginning"
#	}
#
# file {
#    path => [ 
#	        "C:/MRSLogs/TMDS-PA/EventLogs/EventLog.txt",
#	        "C:/MRSLogs/TMDS-PA/EventLogs/ExceptionLog.txt"
#	]
#	type => "TmdsPa"
#    start_position => "beginning"
#	
#  } 
#
#file {
#    path => [
#	         "c:\MRSLogs\TMDS-FANORTE\EventLogs\EventLog.txt",
#	         "c:\MRSLogs\TMDS-FANORTE\EventLogs\ExceptionLog.txt"
#	]
#    start_position => "beginning"
#	type => "TmdsFanorte"
#  }
#
#  file {
#    path => [
#			"c:\MRSLogs\TMDS-FASUL\EventLogs\EventLog.txt",
#			"c:\MRSLogs\TMDS-FASUL\EventLogs\ExceptionLog.txt"
#	]
#    start_position => "beginning"
#	type => "TmdsFasul"
#  }
# 
#  file {
#	path => [
#		"c:\MRSLogs\TMDS-FBA\EventLogs\EventLog.txt",
#		"c:\MRSLogs\TMDS-FBA\EventLogs\ExceptionLog.txt"
#	]
#    start_position => "beginning"
#	type => "TmdsFba"
#  }
     
  file {   
    path =>  [
	 "c:\MRSLogs\TMDS-LC\EventLogs\EventLog.txt",
	 "c:\MRSLogs\TMDS-LC\EventLogs\ExceptionLog.txt"
	]
    start_position => "beginning"
	type => "TmdsLc"
  }
    
#  file {  
#    path => [
#		"c:\MRSLogs\TMDS-PG\EventLogs\EventLog.txt",
#		"c:\MRSLogs\TMDS-PG\EventLogs\ExceptionLog.txt"
#  ]
#    start_position => "beginning"
#	type => "TmdsPg"
#  }
    
}
#08-29-2017 00:22:13.480  InsertNewTrainIDIntoDatabase1:INSERT INTO tblTrainsActive(Symbol, EngineID, InUsed, Subdivision, TerritoryAssignmentID, TrackGUID, SymbolComment, Direction, CallTime, Units, UnitComment, DepTime, ArrTime, FinalTime, OLoads, OEmts, OTons, OLength, DLoads, DEmts, DTons, DLength, MaxSpd, TonsPerOperativeBrake, HazMat, HighWide, EngName, EngOnDuty, EngTimeUp, CondName, CondOnDuty, CondTimeUp,EngNameRel, EngOnDutyRel, EngTimeUpRel, CondNameRel, CondOnDutyRel, CondTimeUpRel,EngNameP, EngOnDutyP, EngTimeUpP,CondNameP, CondOnDutyP, CondTimeUpP, Origin, Dest, EOTD, HOTD, CrewCurrent, CrewRelief, CrewPending, DelayInfo, TrackBull, BadOrderSetOuts, TrainSheetEvents, UnitsP, EngineIDP, OsEvents, Helper, KeyTrain, TrainGUID, TotalHP, ScheduleStatus, TrainLink, TrailingHorsePower, TrainType, StackOrder, SpecialNote, PseudoName, SubType, CBTCEquipped, ActiveSubTrainSheet, MiscellanousInfoOne, MiscellanousInfoTwo, MiscellanousInfoThree, HomeRoadCode, PullerTrain, TrainIsNotActive, HOS, TotalCars, VIA, Release, ScheduleType) VALUES ('WOO5657','GHGH','1','7','131','131214','','SUBINDO','8/29/2017 12:22:13 AM','','','12:00:00 AM','12:00:00 AM','8/29/2017 12:22:13 AM','0','0','0','0','0','0','0','0','0','0',0,0,'','8/29/2017 12:22:13 AM','8/29/2017 12:22:13 AM','NONE','8/29/2017 12:22:13 AM','8/29/2017 12:22:13 AM','NONE','8/29/2017 12:22:13 AM','8/29/2017 12:22:13 AM','NONE','8/29/2017 12:22:13 AM','8/29/2017 12:22:13 AM','NONE','8/29/2017 12:22:13 AM','8/29/2017 12:22:13 AM','NONE','8/29/2017 12:22:13 AM','8/29/2017 12:22:13 AM','','','','','|Engineer|NONE|NONE|NONE|||0|;NONE|Conductor|NONE|NONE|NONE|||0|;NONE|ConductorTwo|NONE|NONE|NONE|||0|;NONE|ConductorThree|NONE|NONE|NONE|||0|;NONE|BrakeMan|NONE|NONE|NONE|||0|;NONE|BrakeManTwo|NONE|NONE|NONE|||0|;NONE|BrakeManThree|NONE|NONE|NONE|||0|;NONE|EngineerTrainee|NONE|NONE|NONE|||0|;NONE|ConductorTrainee|NONE|NONE|NONE|||0|0000','NONE|Engineer|NONE|NONE|NONE|||0|;NONE|Conductor|NONE|NONE|NONE|||0|;NONE|ConductorTwo|NONE|NONE|NONE|||0|;NONE|ConductorThree|NONE|NONE|NONE|||0|;NONE|BrakeMan|NONE|NONE|NONE|||0|;NONE|BrakeManTwo|NONE|NONE|NONE|||0|;NONE|BrakeManThree|NONE|NONE|NONE|||0|;NONE|EngineerTrainee|NONE|NONE|NONE|||0|;NONE|ConductorTrainee|NONE|NONE|NONE|||0|0000','NONE|Engineer|NONE|NONE|NONE|||0|;NONE|Conductor|NONE|NONE|NONE|||0|;NONE|ConductorTwo|NONE|NONE|NONE|||0|;NONE|ConductorThree|NONE|NONE|NONE|||0|;NONE|BrakeMan|NONE|NONE|NONE|||0|;NONE|BrakeManTwo|NONE|NONE|NONE|||0|;NONE|BrakeManThree|NONE|NONE|NONE|||0|;NONE|EngineerTrainee|NONE|NONE|NONE|||0|;NONE|ConductorTrainee|NONE|NONE|NONE|||0|0000','','','','','','','','0','0','016923B8-EB81-450E-BFA5-0B9D1A611A81',0,'','','0.00','',0,0,'WOO5657','','0','9E51CBDC-6328-4721-9EC8-260AC3BFCBC5','','','','',0,0,'8/24/2013','0','','8/24/2013','')
#08-29-2017 00:18:37.399 CLICKED -(YES TO DELETE TRAIN ID:KRP8522)
 # match => [ "message",  "%{POSINT:moduleid}%{SPACE}%{NUMBER:date}"]
filter { 
    if [type] == "TmdsLc" {
    grok {
      match => [ "message", =>  "%\"{CLICKED -(YES TO DELETE TRAIN ID:\"}"]
        }
      }
	if [type] == "ocm" {
		 mutate{
			add_field => ["railroad", "MRS"]
			add_field => ["source", "OCM"]
			}
		}
		
	else{
	 mutate{
			add_field => ["railroad", "MRS"]
			add_field => ["source", "TMDS"]
		}	
	}
}
output {
if [type] == "TmdsLc"{
 stdout {	   
	    codec => "json"
	   }
	   
}
# if [type] == "ocm"{
#	http {
#	    url => "https://MRSprodServicebus.servicebus.windows.net/mrsprodservicebusqueueocm/messages"
#		         
#		headers => [
#			"Authorization", "SharedAccessSignature sr=https%3A%2F%2FMRSprodServicebus.servicebus.windows.net%2Fmrsprodservicebusqueueocm&sig=YZ1%2BGbnS4OTgnaJlRZpKA6DJAwWdSLwnD1GNsXftGpo%3D&se=1530699198&skn=mrsprodocmqueuePolicy"
#		]
#		http_method => "post"
#	   }	
#	   stdout {	   
#	    codec => "json"
#	   }
#	}
#else {
#	http {
#	    url => "https://MRSprodServicebus.servicebus.windows.net/mrsprodservicebusqueuetmds/messages"	
#		headers => [			
#			"Authorization", "SharedAccessSignature sr=https%3A%2F%2FMRSprodServicebus.servicebus.windows.net%2Fmrsprodservicebusqueuetmds&sig=%2F3r%2FGmC8Iqa7acRF%2Bhe8kX3pRMcJ6SsuWhOBq2NlHgU%3D&se=1530700599&skn=mrsprodtmdsqueuePolicy"
#		]
#		http_method => "post"
#	   }	
#	   stdout {	   
#	    codec => "json"
#	   }
#	}
}